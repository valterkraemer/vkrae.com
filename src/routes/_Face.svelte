<script>
  let paths = [];
  let totalLength = 0;

  function initPaths(node) {
    paths = Array.from(node.querySelectorAll("path")).map((node) => {
      const start = totalLength;
      const length = node.getTotalLength();
      totalLength += length;

      return {
        node,
        start,
        end: totalLength,
        length,
      };
    });
  }

  function distanceFromCenter(x, y) {
    const xMax = window.innerWidth / 2;
    const yMax = window.innerHeight / 2;

    const xDistance = Math.abs(xMax - x);
    const yDistance = Math.abs(yMax - y);

    const distance = Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
    const maxDistance = Math.sqrt(Math.pow(xMax, 2) + Math.pow(yMax, 2));

    const result = distance / maxDistance;

    // Make it easier to fill / empty page
    return Math.min(1, Math.max(0, (result * 1.5) - 0.2))
  }

  function getAmount(pathDistance, item) {
    if (pathDistance < item.start) {
      return 0;
    }

    if (pathDistance > item.end) {
      return item.length;
    }

    return pathDistance - item.start;
  }

  function handleMousemove(e) {
    const distance = distanceFromCenter(e.clientX, e.clientY);
    const pathDistance = (1 - distance) * totalLength;

    paths.forEach((item) => {
      let amount = getAmount(pathDistance, item);
      item.node.style["stroke-dasharray"] = `${amount} ${item.length - amount}`;
    });
  }
</script>

<svelte:body on:mousemove={handleMousemove} />

<svg use:initPaths viewBox="0 0 527 849" xmlns="http://www.w3.org/2000/svg">
  <path
    d="M68,185 C66,188 61,195 60,199 C58,203 44,225 43,230 C41,234 52,222 51,226 C49,231 41,285 40,291 L33,312 C33,315 39,305 39,308 C37,333 40,358 40,384 C41,408 37,430 43,466 C56,548 50,548 79,627 C109,706 130,754 167,800 C205,846 218,851 275,847 C313,845 347,825 377,787 C421,730 448,685 457,653 C465,622 473,586 480,547 C489,536 497,525 503,514 C503,514 519,488 521,482 C526,470 521,447 517,426 C523,409 526,396 526,388 C526,377 514,379 509,388 C505,398 505,434 503,445 C501,456 495,469 495,466 C495,463 494,433 486,380 C485,371 484,399 482,388 C480,380 478,335 477,327 C477,323 472,336 471,332 L474,306 L467,272 C467,269 475,279 475,276 L464,255 C460,236 455,222 450,213 C444,203 427,190 422,184 C417,178 416,169 415,168 C413,168 413,177 409,175 L388,167 C379,164 377,158 376,158 C374,157 382,169 380,168 C372,168 370,163 362,162 C354,162 317,142 312,142 C307,142 349,162 333,162 L299,164 C289,165 267,149 264,149 C260,150 283,165 278,167 L264,171 C262,171 279,183 278,184 C277,184 256,172 254,173 C247,176 244,182 239,182 L225,178 C187,148 168,133 167,135 C166,139 220,177 208,173 L186,165 C153,141 136,130 133,131 C130,133 183,165 164,159 C147,154 145,149 125,152 C123,152 131,157 128,158 L114,154 C108,155 99,158 95,156 C92,154 74,151 72,156 C71,158 101,156 91,161 C84,164 79,169 74,176 L63,182 C62,183 69,181 68,184 L68,185 Z"
  />
  <path
    d="M37,438 L24,361 C22,351 18,375 17,369 L17,317 L13,274 C13,271 11,275 11,272 L13,259 L12,231 C12,220 14,209 17,197 C16,191 14,188 12,189 C5,194 -1,205 2,192 C5,175 14,157 28,138 C63,129 79,124 75,122 C69,120 8,130 8,129 C8,127 50,113 50,109 C50,106 5,98 2,92 C-2,86 61,91 61,87 C61,84 15,64 18,61 C22,57 84,82 84,78 C84,73 27,33 36,32 C46,30 109,73 119,73 C128,73 64,27 81,32 C97,36 165,87 174,87 C183,87 96,19 97,13 C98,7 171,59 178,60 C186,62 128,19 133,19 C139,19 193,63 198,60 C204,57 138,-6 162,13 C186,32 230,87 234,87 C238,87 166,1 171,1 C175,1 278,115 284,115 C290,115 200,14 204,13 C208,11 254,67 262,69 C270,70 231,18 238,19 C245,21 319,116 325,115 C331,113 257,13 262,13 C267,13 313,73 319,73 C324,73 281,14 284,13 C288,11 353,109 358,109 C363,109 299,6 305,13 C311,20 376,115 379,115 C383,115 319,20 319,13 C319,6 365,79 372,82 C379,84 347,28 350,23 C353,18 385,78 392,78 C399,78 374,22 379,23 C385,24 404,87 408,87 C411,87 412,15 416,30 C419,45 418,125 422,129 C427,132 431,41 435,46 C440,51 436,138 439,147 C443,156 456,105 458,109 C461,114 447,159 448,162 C449,165 457,116 463,122 C468,128 463,178 466,182 C468,187 476,144 477,147 C478,151 466,191 469,194 C473,198 492,161 494,162 C496,163 474,194 477,197 C480,201 506,177 508,179 C510,182 484,203 484,208 C484,211 492,211 508,208 C492,211 484,215 484,217 C484,221 511,244 512,248 C514,251 494,239 494,245 C494,251 520,280 522,285 C524,291 509,274 508,293 C507,312 520,327 520,330 C520,334 504,304 504,313 C504,323 520,353 520,357 C521,361 511,338 508,348 C506,355 508,368 512,385"
  />
  <path
    d="M97,442 C97,428 118,422 135,421 C153,420 167,435 173,438 C178,441 179,445 178,446 L161,451 C155,453 149,455 135,455 C122,454 97,449 97,442 Z"
  />
  <path
    d="M329,446 C329,441 352,428 369,426 C387,424 401,433 407,435 C412,437 415,441 415,443 C414,445 421,445 404,450 C387,454 386,456 372,456 C351,456 329,451 329,446 Z"
  />
  <path
    d="M148,401 C182,406 203,414 210,426 C221,443 219,501 214,519 C209,537 191,570 185,585 C178,600 196,604 206,611 C215,617 215,625 238,623 C260,622 266,610 281,606 C297,602 303,604 308,601 C314,599 316,588 313,580 L299,552"
  />
  <path d="M297,426 C309,412 327,405 342,405 C356,405 383,403 398,409" />
  <path
    d="M163,681 C162,678 189,681 201,681 C212,681 230,687 256,686 C282,685 295,681 307,678 C318,676 354,672 351,678 C348,685 304,699 294,706 C283,712 270,715 256,715 C242,715 215,708 203,704 C191,699 164,684 163,681 Z"
  />
  <path
    d="M144,446 C141,450 127,448 125,443 C122,437 128,426 134,426 C137,427 143,429 145,433 C148,438 145,444 144,446 Z"
  />
  <path
    d="M380,450 C377,454 362,452 359,446 C357,441 363,429 369,430 C374,431 378,433 380,437 C383,442 382,448 380,450 Z"
  />
  <path d="M167,390 C167,390 136,382 114,382 C91,382 70,390 70,390" />
  <path d="M334,389 C347,387 368,387 394,389 C421,392 436,394 439,397" />
  <path
    d="M128.676117,741.52429 C127.814464,759.854285 127.072525,773.23083 126.450301,781.653924 C125.828078,790.077019 125.086139,796.787842 124.224486,801.786396"
  />
  <path
    d="M447.425907,678.292647 C444.399812,695.543008 443.507681,718.150713 444.749516,746.115762 C445.99135,774.080811 448.791322,794.436089 453.149434,807.181597"
  />
</svg>

<style>
  svg {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50%;
    margin: auto;
    stroke: #333;
    stroke-width: 5;
    fill: none;
  }
</style>
